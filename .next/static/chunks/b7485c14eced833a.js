(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border border-primary-200 bg-white text-primary-900 shadow-sm dark:border-primary-800 dark:bg-primary-900 dark:text-primary-100",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-primary-500 dark:text-primary-400",e),...r}));l.displayName="CardDescription";let d=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));d.displayName="CardContent",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},3812,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,type:r,...s},i)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-primary-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-primary-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-primary-800 dark:bg-primary-950 dark:ring-offset-primary-950 dark:placeholder:text-primary-600 dark:focus-visible:ring-accent-500",e),ref:i,...s}));s.displayName="Input",e.s(["Input",()=>s])},81996,e=>{"use strict";function t(e){if(null!=e){if("number"==typeof e&&Number.isFinite(e)){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t.toISOString().split("T")[0]}if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=new Date(t);return Number.isNaN(r.getTime())?void 0:r.toISOString().split("T")[0]}if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e.toISOString().split("T")[0]}}function r(e){if(e||0===e){if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e;if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){let[,e,t,a]=r,s=Number(e),i=Number(t)-1,n=Number(a);if(Number.isInteger(s)&&Number.isInteger(i)&&Number.isInteger(n)){let e=new Date(s,i,n);return Number.isNaN(e.getTime())?void 0:e}}let a=new Date(t);return Number.isNaN(a.getTime())?void 0:a}if("number"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t}}}function a(e,t=!1){let s;if(!e)return"";let i="string"==typeof e?r(e):e;if(!i)return"";let n=t?((s=new Date(i)).setDate(s.getDate()+-1),s):i;return new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}e.s(["formatDisplayDate",()=>a,"toDateOrUndefined",()=>r,"toIsoDate",()=>t])},52607,37851,e=>{"use strict";var t=e.i(81996);function r(e){if(!e||"object"!=typeof e)return 0;if("number"==typeof e.duration&&Number.isFinite(e.duration)&&e.duration>0)return e.duration;let r=(0,t.toDateOrUndefined)(e.start),a=(0,t.toDateOrUndefined)(e.end);if(!r||!a)return 0;let s=(a.getTime()-r.getTime())/864e5;return!Number.isFinite(s)||s<=0?0:s}function a(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&e.trim().length){let t=Number(e);if(!Number.isNaN(t))return t}}function s(e,t,r){return Math.max(t,Math.min(r,e))}function i(e,r,s){return{tasks:e.map(e=>(function(e){let r={};void 0!==e.id&&(r.id=e.id),void 0!==e.text&&(r.text=e.text),void 0!==e.type&&(r.type=e.type);let s=(0,t.toIsoDate)(e.start);if(s&&(r.start=s),"milestone"===e.type);else{let a=(0,t.toIsoDate)(e.end);a&&(r.end=a)}let i=(0,t.toIsoDate)(e.base_start);i&&(r.base_start=i);let n=(0,t.toIsoDate)(e.base_end);n&&(r.base_end=n);let l=a(e.progress);return void 0!==l&&(r.progress=l),void 0!==e.parent&&(r.parent=e.parent),void 0!==e.lazy&&(r.lazy=e.lazy),void 0!==e.category&&(r.category=e.category),void 0!==e.workType&&(r.workType=e.workType),void 0!==e.open&&(r.open=e.open),r})(e)),links:r.map(e=>{let t;return t={},void 0!==e.id&&(t.id=e.id),void 0!==e.source&&(t.source=e.source),void 0!==e.target&&(t.target=e.target),void 0!==e.type&&(t.type=e.type),t}),scales:s?.map(e=>({unit:e.unit,step:e.step,format:e.format}))}}e.s(["calculateTaskDuration",()=>r,"clamp",()=>s,"normalizeNumber",()=>a],37851),e.s(["serializeSchedule",()=>i],52607)},49453,e=>{"use strict";var t=e.i(81996);let r={urgent:{bar:"#f49a82",progress:"#f45e36"},narrow:{bar:"#676a81",progress:"#1a2630"},progress:{bar:"#00bcd4",progress:"#00bcd4"},round:{bar:"#10b981",progress:"#6ee7b7"}};function a(e){let a={...e},s=(0,t.toDateOrUndefined)(a.start);s&&(a.start=new Date(s));let i=(0,t.toDateOrUndefined)(a.end);i&&(a.end=new Date(i));let n=(0,t.toDateOrUndefined)(a.base_start);n&&(a.base_start=new Date(n));let l=(0,t.toDateOrUndefined)(a.base_end);l&&(a.base_end=new Date(l)),"milestone"===a.type&&(a.duration=0,delete a.end);let d=r["string"==typeof a.type?a.type:""];return d&&(a.color=d.bar,a.progressColor=d.progress),a}e.s(["decorateTask",()=>a])},70823,e=>{"use strict";e.i(81996),e.i(37851),e.i(52607),e.i(49453),e.s([])},71839,e=>{"use strict";let t="contech_gantt_projects",r="contech_gantt_charts";function a(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function s(){let e=localStorage.getItem(t);return e?JSON.parse(e):[]}function i(e){return s().find(t=>t.id===e)||null}function n(e){let r=s(),i={id:a(),...e,status:e.status||"planning",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:"mock-user-id"};return r.push(i),localStorage.setItem(t,JSON.stringify(r)),i}function l(e,r){let a=s(),i=a.findIndex(t=>t.id===e);if(-1===i)throw Error("Project not found");return a[i]={...a[i],...r,updated_at:new Date().toISOString()},localStorage.setItem(t,JSON.stringify(a)),a[i]}function d(e){let r=s().filter(t=>t.id!==e);localStorage.setItem(t,JSON.stringify(r))}function o(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).filter(t=>t.project_id===e)}function c(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).find(t=>t.id===e)||null}function m(e){let t=localStorage.getItem(r),s=t?JSON.parse(t):[],i={id:a(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.push(i),localStorage.setItem(r,JSON.stringify(s)),i}function u(e,t){let a=localStorage.getItem(r),s=a?JSON.parse(a):[],i=s.findIndex(t=>t.id===e);if(-1===i)throw Error("Chart not found");return s[i]={...s[i],...t,updated_at:new Date().toISOString()},localStorage.setItem(r,JSON.stringify(s)),s[i]}function p(e){let t=localStorage.getItem(r),a=(t?JSON.parse(t):[]).filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(a))}function x(e){let t=localStorage.getItem("contech_gantt_tasks");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}function f(e){let t=localStorage.getItem("contech_gantt_links");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}e.s(["createMockGanttChart",()=>m,"createMockProject",()=>n,"deleteMockGanttChart",()=>p,"deleteMockProject",()=>d,"getMockGanttChart",()=>c,"getMockGanttCharts",()=>o,"getMockLinks",()=>f,"getMockProject",()=>i,"getMockProjects",()=>s,"getMockTasks",()=>x,"updateMockGanttChart",()=>u,"updateMockProject",()=>l])},30257,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(39964),i=e.i(59544),n=e.i(87316),l=e.i(17923),d=e.i(23585);e.i(70823);var o=e.i(81996);let c={planning:{label:"계획 중",className:"bg-accent-100 text-accent-700 dark:bg-accent-900 dark:text-accent-300"},active:{label:"진행 중",className:"bg-success-100 text-success-700 dark:bg-success-900 dark:text-success-300"},completed:{label:"완료",className:"bg-primary-100 text-primary-700 dark:bg-primary-800 dark:text-primary-300"},on_hold:{label:"보류",className:"bg-warning-100 text-warning-700 dark:bg-warning-900 dark:text-warning-300"}};function m({project:e}){let r=c[e.status];return(0,t.jsxs)(s.Card,{className:"card-hover transition-all duration-200",children:[(0,t.jsx)(s.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(s.CardTitle,{className:"text-xl mb-1",children:(0,t.jsx)(a.default,{href:`/dashboard/projects/${e.id}`,className:"hover:text-accent-600 dark:hover:text-accent-400 transition-colors",children:e.name})}),(0,t.jsx)(s.CardDescription,{className:"line-clamp-2",children:e.description||"설명이 없습니다."})]}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0",children:(0,t.jsx)(d.MoreVertical,{className:"h-4 w-4"})})]})}),(0,t.jsx)(s.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.className}`,children:r.label})}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-primary-600 dark:text-primary-400",children:[(0,t.jsx)(n.Calendar,{className:"h-4 w-4 mr-2"}),(0,t.jsxs)("span",{children:[(0,o.formatDisplayDate)(e.start_date),e.end_date&&` ~ ${(0,o.formatDisplayDate)(e.end_date)}`]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2 pt-2 border-t border-primary-200 dark:border-primary-800",children:(0,t.jsx)(a.default,{href:`/dashboard/projects/${e.id}`,className:"flex-1",children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",className:"w-full",children:[(0,t.jsx)(l.BarChart3,{className:"h-4 w-4 mr-2"}),"Gantt 차트 보기"]})})})]})})]})}var u=e.i(46700),p=e.i(75254);let x=(0,p.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);function f(){let[e,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[n,l]=(0,r.useState)(null);return((0,r.useEffect)(()=>{!async function(){try{i(!0);let e=await (0,u.getProjects)();a(e),l(null)}catch(e){console.error("Failed to load projects:",e),l("프로젝트를 불러오는 데 실패했습니다.")}finally{i(!1)}}()},[]),s)?(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{className:"ml-3 text-primary-600",children:"프로젝트 로딩 중..."})]}):n?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,t.jsxs)("div",{className:"text-error-600 mb-4",children:["⚠️ ",n]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"다시 시도"})]}):0===e.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,t.jsx)(x,{className:"h-16 w-16 text-primary-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-primary-900 dark:text-primary-100 mb-2",children:"프로젝트가 없습니다"}),(0,t.jsx)("p",{className:"text-primary-600 dark:text-primary-400 mb-4",children:"새 프로젝트를 생성하여 시작하세요"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsx)(m,{project:e},e.id))})}var g=e.i(53145),h=e.i(94814),b=e.i(81307),y=e.i(3812),N=e.i(37727),j=e.i(46696);let v=b.z.object({name:b.z.string().min(1,"프로젝트 이름을 입력하세요").max(100,"이름이 너무 깁니다"),description:b.z.string().max(500,"설명이 너무 깁니다").optional(),start_date:b.z.string().min(1,"시작일을 선택하세요"),end_date:b.z.string().optional(),status:b.z.enum(["planning","active","completed","on_hold"]).optional()});function k({project:e,isOpen:a,onClose:s,onSuccess:n}){let[l,d]=(0,r.useState)(!1),o=!!e,{register:c,handleSubmit:m,formState:{errors:p},reset:x}=(0,g.useForm)({resolver:(0,h.zodResolver)(v),defaultValues:e?{name:e.name,description:e.description||"",start_date:e.start_date,end_date:e.end_date||"",status:e.status}:{name:"",description:"",start_date:new Date().toISOString().split("T")[0],end_date:"",status:"planning"}}),f=async t=>{try{d(!0);let r={name:t.name,description:t.description||void 0,start_date:t.start_date,end_date:t.end_date||void 0,status:t.status||"planning"};o?(await (0,u.updateProject)(e.id,r),j.toast.success("프로젝트가 수정되었습니다")):(await (0,u.createProject)(r),j.toast.success("프로젝트가 생성되었습니다")),x(),n(),s()}catch(e){console.error("Failed to save project:",e),j.toast.error(o?"프로젝트 수정 실패":"프로젝트 생성 실패")}finally{d(!1)}};return a?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,t.jsxs)("div",{className:"relative bg-white dark:bg-primary-900 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-primary-200 dark:border-primary-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:o?"프로젝트 수정":"새 프로젝트"}),(0,t.jsx)("button",{onClick:s,className:"text-primary-500 hover:text-primary-700 dark:hover:text-primary-300",children:(0,t.jsx)(N.X,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:m(f),className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"프로젝트 이름 *"}),(0,t.jsx)(y.Input,{...c("name"),placeholder:"예: 건설 프로젝트 A"}),p.name&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"설명"}),(0,t.jsx)("textarea",{...c("description"),rows:3,className:"flex w-full rounded-md border border-primary-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-primary-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-primary-800 dark:bg-primary-950 dark:ring-offset-primary-950 dark:placeholder:text-primary-400 dark:focus-visible:ring-primary-300",placeholder:"프로젝트 설명을 입력하세요"}),p.description&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.description.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"시작일 *"}),(0,t.jsx)(y.Input,{type:"date",...c("start_date")}),p.start_date&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.start_date.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"종료일"}),(0,t.jsx)(y.Input,{type:"date",...c("end_date")}),p.end_date&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.end_date.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"상태"}),(0,t.jsxs)("select",{...c("status"),className:"flex h-10 w-full rounded-md border border-primary-200 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-primary-800 dark:bg-primary-950 dark:ring-offset-primary-950 dark:focus-visible:ring-primary-300",children:[(0,t.jsx)("option",{value:"planning",children:"계획 중"}),(0,t.jsx)("option",{value:"active",children:"진행 중"}),(0,t.jsx)("option",{value:"completed",children:"완료"}),(0,t.jsx)("option",{value:"on_hold",children:"보류"})]}),p.status&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:p.status.message})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:l,children:"취소"}),(0,t.jsx)(i.Button,{type:"submit",variant:"primary",className:"flex-1",loading:l,disabled:l,children:o?"수정":"생성"})]})]})]})]}):null}let w=(0,p.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),S=(0,p.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var _=e.i(81949);function D(){let[e,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),l=async()=>{try{a(!0),(await _.default.post("/api/seed")).data.success&&(j.toast.success("샘플 프로젝트가 생성되었습니다!"),n(!0),setTimeout(()=>{window.location.reload()},1e3))}catch(e){console.error("Seed error:",e),j.toast.error("샘플 데이터 생성 실패")}finally{a(!1)}};return s?(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",disabled:!0,children:[(0,t.jsx)(S,{className:"h-4 w-4 mr-2"}),"생성 완료"]}):(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:l,loading:e,disabled:e,children:[(0,t.jsx)(w,{className:"h-4 w-4 mr-2"}),"샘플 프로젝트 생성"]})}var I=e.i(7233);function C(){let[e,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)(0),[l,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{d(!1)},[]),(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-primary-900 dark:text-primary-100",children:"프로젝트 대시보드"}),(0,t.jsx)("p",{className:"mt-2 text-primary-600 dark:text-primary-400",children:"프로젝트를 관리하고 Gantt 차트를 생성하세요"}),l&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-sm text-warning-600 dark:text-warning-400",children:[(0,t.jsx)(w,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Mock 모드 (LocalStorage 사용 중)"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!l&&(0,t.jsx)(D,{}),(0,t.jsxs)(i.Button,{variant:"primary",size:"lg",onClick:()=>a(!0),children:[(0,t.jsx)(I.Plus,{className:"h-5 w-5 mr-2"}),"새 프로젝트"]})]})]}),(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{className:"ml-3 text-primary-600",children:"프로젝트 로딩 중..."})]}),children:(0,t.jsx)(f,{},s)}),(0,t.jsx)(k,{isOpen:e,onClose:()=>a(!1),onSuccess:()=>{n(e=>e+1)}})]})}e.i(71839),e.s(["default",()=>C],30257)}]);