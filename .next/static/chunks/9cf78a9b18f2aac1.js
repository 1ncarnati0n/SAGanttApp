(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81996,e=>{"use strict";function t(e){if(null!=e){if("number"==typeof e&&Number.isFinite(e)){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t.toISOString().split("T")[0]}if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=new Date(t);return Number.isNaN(r.getTime())?void 0:r.toISOString().split("T")[0]}if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e.toISOString().split("T")[0]}}function r(e){if(e||0===e){if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e;if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){let[,e,t,n]=r,a=Number(e),i=Number(t)-1,o=Number(n);if(Number.isInteger(a)&&Number.isInteger(i)&&Number.isInteger(o)){let e=new Date(a,i,o);return Number.isNaN(e.getTime())?void 0:e}}let n=new Date(t);return Number.isNaN(n.getTime())?void 0:n}if("number"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t}}}function n(e,t=!1){let a;if(!e)return"";let i="string"==typeof e?r(e):e;if(!i)return"";let o=t?((a=new Date(i)).setDate(a.getDate()+-1),a):i;return new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(o)}e.s(["formatDisplayDate",()=>n,"toDateOrUndefined",()=>r,"toIsoDate",()=>t])},52607,37851,e=>{"use strict";var t=e.i(81996);function r(e){if(!e||"object"!=typeof e)return 0;if("number"==typeof e.duration&&Number.isFinite(e.duration)&&e.duration>0)return e.duration;let r=(0,t.toDateOrUndefined)(e.start),n=(0,t.toDateOrUndefined)(e.end);if(!r||!n)return 0;let a=(n.getTime()-r.getTime())/864e5;return!Number.isFinite(a)||a<=0?0:a}function n(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&e.trim().length){let t=Number(e);if(!Number.isNaN(t))return t}}function a(e,t,r){return Math.max(t,Math.min(r,e))}function i(e,r,a){return{tasks:e.map(e=>(function(e){let r={};void 0!==e.id&&(r.id=e.id),void 0!==e.text&&(r.text=e.text),void 0!==e.type&&(r.type=e.type);let a=(0,t.toIsoDate)(e.start);if(a&&(r.start=a),"milestone"===e.type);else{let n=(0,t.toIsoDate)(e.end);n&&(r.end=n)}let i=(0,t.toIsoDate)(e.base_start);i&&(r.base_start=i);let o=(0,t.toIsoDate)(e.base_end);o&&(r.base_end=o);let s=n(e.progress);return void 0!==s&&(r.progress=s),void 0!==e.parent&&(r.parent=e.parent),void 0!==e.lazy&&(r.lazy=e.lazy),void 0!==e.category&&(r.category=e.category),void 0!==e.workType&&(r.workType=e.workType),void 0!==e.open&&(r.open=e.open),r})(e)),links:r.map(e=>{let t;return t={},void 0!==e.id&&(t.id=e.id),void 0!==e.source&&(t.source=e.source),void 0!==e.target&&(t.target=e.target),void 0!==e.type&&(t.type=e.type),t}),scales:a?.map(e=>({unit:e.unit,step:e.step,format:e.format}))}}e.s(["calculateTaskDuration",()=>r,"clamp",()=>a,"normalizeNumber",()=>n],37851),e.s(["serializeSchedule",()=>i],52607)},49453,e=>{"use strict";var t=e.i(81996);let r={urgent:{bar:"#f49a82",progress:"#f45e36"},narrow:{bar:"#676a81",progress:"#1a2630"},progress:{bar:"#00bcd4",progress:"#00bcd4"},round:{bar:"#10b981",progress:"#6ee7b7"}};function n(e){let n={...e},a=(0,t.toDateOrUndefined)(n.start);a&&(n.start=new Date(a));let i=(0,t.toDateOrUndefined)(n.end);i&&(n.end=new Date(i));let o=(0,t.toDateOrUndefined)(n.base_start);o&&(n.base_start=new Date(o));let s=(0,t.toDateOrUndefined)(n.base_end);s&&(n.base_end=new Date(s)),"milestone"===n.type&&(n.duration=0,delete n.end);let l=r["string"==typeof n.type?n.type:""];return l&&(n.color=l.bar,n.progressColor=l.progress),n}e.s(["decorateTask",()=>n])},71839,e=>{"use strict";let t="contech_gantt_projects",r="contech_gantt_charts";function n(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function a(){let e=localStorage.getItem(t);return e?JSON.parse(e):[]}function i(e){return a().find(t=>t.id===e)||null}function o(e){let r=a(),i={id:n(),...e,status:e.status||"planning",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:"mock-user-id"};return r.push(i),localStorage.setItem(t,JSON.stringify(r)),i}function s(e,r){let n=a(),i=n.findIndex(t=>t.id===e);if(-1===i)throw Error("Project not found");return n[i]={...n[i],...r,updated_at:new Date().toISOString()},localStorage.setItem(t,JSON.stringify(n)),n[i]}function l(e){let r=a().filter(t=>t.id!==e);localStorage.setItem(t,JSON.stringify(r))}function c(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).filter(t=>t.project_id===e)}function u(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).find(t=>t.id===e)||null}function d(e){let t=localStorage.getItem(r),a=t?JSON.parse(t):[],i={id:n(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return a.push(i),localStorage.setItem(r,JSON.stringify(a)),i}function f(e,t){let n=localStorage.getItem(r),a=n?JSON.parse(n):[],i=a.findIndex(t=>t.id===e);if(-1===i)throw Error("Chart not found");return a[i]={...a[i],...t,updated_at:new Date().toISOString()},localStorage.setItem(r,JSON.stringify(a)),a[i]}function g(e){let t=localStorage.getItem(r),n=(t?JSON.parse(t):[]).filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(n))}function p(e){let t=localStorage.getItem("contech_gantt_tasks");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}function m(e){let t=localStorage.getItem("contech_gantt_links");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}e.s(["createMockGanttChart",()=>d,"createMockProject",()=>o,"deleteMockGanttChart",()=>g,"deleteMockProject",()=>l,"getMockGanttChart",()=>u,"getMockGanttCharts",()=>c,"getMockLinks",()=>m,"getMockProject",()=>i,"getMockProjects",()=>a,"getMockTasks",()=>p,"updateMockGanttChart",()=>f,"updateMockProject",()=>s])},70823,e=>{"use strict";e.i(81996),e.i(37851),e.i(52607),e.i(49453),e.s([])},18566,(e,t,r)=>{t.exports=e.r(76562)},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},66255,e=>{"use strict";var t=e.i(47167),r=e.i(11795),n=e.i(71839);let a="true"===t.default.env.NEXT_PUBLIC_USE_MOCK;async function i(e){if(a)return(0,n.getMockGanttCharts)(e);let t=(0,r.createClient)(),{data:i,error:o}=await t.from("gantt_charts").select("*").eq("project_id",e).order("created_at",{ascending:!1});return o?(console.error("Error fetching Gantt charts:",o),(0,n.getMockGanttCharts)(e)):i}async function o(e){if(a)return(0,n.getMockGanttChart)(e);let t=(0,r.createClient)(),{data:i,error:o}=await t.from("gantt_charts").select("*").eq("id",e).single();return o?("PGRST116"===o.code||console.error("Error fetching Gantt chart:",o),(0,n.getMockGanttChart)(e)):i}async function s(e){if(a)return(0,n.createMockGanttChart)(e);let t=(0,r.createClient)(),{data:i,error:o}=await t.from("gantt_charts").insert(e).select().single();return o?(console.error("Error creating Gantt chart:",o),(0,n.createMockGanttChart)(e)):i}e.s(["createGanttChart",()=>s,"getGanttChart",()=>o,"getGanttCharts",()=>i])},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let n=e.r(32061);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new n.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function n(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return n}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return s}});let n=e.r(43476),a=e.r(74080),i=e.r(63599),o=e.r(9885);function s({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let n=t.reactLoadableManifest;for(let t of e){if(!n[t])continue;let e=n[t].files;r.push(...e)}}return 0===r.length?null:(0,n.jsx)(n.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,o.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,n.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return c}});let n=e.r(43476),a=e.r(71645),i=e.r(67585),o=e.r(52157);function s(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},c=function(e){let t={...l,...e},r=(0,a.lazy)(()=>t.loader().then(s)),c=t.loading;function u(e){let s=c?(0,n.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,l=!t.ssr||!!t.loading,u=l?a.Suspense:a.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:["undefined"==typeof window?(0,n.jsx)(o.PreloadChunks,{moduleIds:t.modules}):null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(u,{...l?{fallback:s}:{},children:d})}return u.displayName="LoadableComponent",u}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let n=e.r(55682)._(e.r(69093));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,n.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},30842,e=>{"use strict";var t=e.i(43476),r=e.i(71645),n=e.i(18566),a=e.i(22016);let i=(0,e.i(70703).default)(()=>e.A(96611).then(e=>e.GanttChart),{loadableGenerated:{modules:[77491]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:"Loading Gantt Chart..."})});function o(){return(0,t.jsx)(i,{})}var s=e.i(59544),l=e.i(71689);let c=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var u=e.i(66255),d=e.i(47167),f=e.i(11795);e.i(70823);var g=e.i(49453),p=e.i(71839);let m="true"===d.default.env.NEXT_PUBLIC_USE_MOCK;async function h(e){if(m)return(0,p.getMockTasks)(e);let t=(0,f.createClient)(),{data:r,error:n}=await t.from("tasks").select("*").eq("gantt_chart_id",e).order("position",{ascending:!0});return n?(console.error("Error fetching tasks:",n),(0,p.getMockTasks)(e)):r.map(e=>{let t={id:e.id,text:e.text,type:e.type,start:e.start_date,end:e.end_date,progress:e.progress,parent:e.parent_id,position:e.position,open:e.open,assigned:e.assigned_to,category:e.category,workType:e.work_type};return(0,g.decorateTask)(t)})}let y="true"===d.default.env.NEXT_PUBLIC_USE_MOCK;async function b(e){if(y)return(0,p.getMockLinks)(e);let t=(0,f.createClient)(),{data:r,error:n}=await t.from("links").select("*").eq("gantt_chart_id",e);return n?(console.error("Error fetching links:",n),(0,p.getMockLinks)(e)):r.map(e=>({id:e.id,source:e.source_task_id,target:e.target_task_id,type:e.type}))}var _=e.i(46696);function k({params:e}){let{id:i}=(0,r.use)(e),d=(0,n.useRouter)(),[f,g]=(0,r.useState)(null),[p,m]=(0,r.useState)([]),[y,k]=(0,r.useState)([]),[N,S]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){try{S(!0);let[e,t,r]=await Promise.all([(0,u.getGanttChart)(i),h(i),b(i)]);if(!e){_.toast.error("Gantt 차트를 찾을 수 없습니다"),d.push("/dashboard");return}g(e),m(t),k(r)}catch(e){console.error("Failed to load Gantt chart:",e),_.toast.error("Gantt 차트 로딩 실패")}finally{S(!1)}}()},[i,d]);let x=async()=>{try{v(!0),_.toast.success("저장되었습니다")}catch(e){console.error("Save error:",e),_.toast.error("저장 실패")}finally{v(!1)}};return N?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("p",{className:"mt-4 text-primary-600",children:"Gantt 차트 로딩 중..."})]}):f?(0,t.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-200 dark:border-primary-800 bg-white dark:bg-primary-900",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(a.default,{href:`/dashboard/projects/${f.project_id}`,children:(0,t.jsxs)(s.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(l.ArrowLeft,{className:"h-4 w-4 mr-2"}),"프로젝트로 돌아가기"]})}),(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-xl font-bold text-primary-900 dark:text-primary-100",children:f.name})})]}),(0,t.jsxs)(s.Button,{variant:"primary",size:"md",onClick:x,loading:j,disabled:j,children:[(0,t.jsx)(c,{className:"h-4 w-4 mr-2"}),"저장"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,t.jsx)(o,{})})]}):null}e.s(["default",()=>k],30842)},96611,e=>{e.v(t=>Promise.all(["static/chunks/23cac34cb5ad20a1.css","static/chunks/6a5e13f50d6a3ad9.css","static/chunks/b2348a766365fe17.js","static/chunks/2810e1d89d990c23.js"].map(t=>e.l(t))).then(()=>t(77491)))}]);