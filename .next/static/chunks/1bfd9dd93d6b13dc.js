(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39964,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("rounded-lg border border-primary-200 bg-white text-primary-900 shadow-sm dark:border-primary-800 dark:bg-primary-900 dark:text-primary-100",e),...r}));s.displayName="Card";let i=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let n=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("h3",{ref:s,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let l=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-primary-500 dark:text-primary-400",e),...r}));l.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent",r.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>o,"CardDescription",()=>l,"CardHeader",()=>i,"CardTitle",()=>n])},3812,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(75157);let s=r.forwardRef(({className:e,type:r,...s},i)=>(0,t.jsx)("input",{type:r,className:(0,a.cn)("flex h-10 w-full rounded-md border border-primary-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-primary-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-primary-800 dark:bg-primary-950 dark:ring-offset-primary-950 dark:placeholder:text-primary-600 dark:focus-visible:ring-accent-500",e),ref:i,...s}));s.displayName="Input",e.s(["Input",()=>s])},81996,e=>{"use strict";function t(e){if(null!=e){if("number"==typeof e&&Number.isFinite(e)){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t.toISOString().split("T")[0]}if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=new Date(t);return Number.isNaN(r.getTime())?void 0:r.toISOString().split("T")[0]}if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e.toISOString().split("T")[0]}}function r(e){if(e||0===e){if(e instanceof Date)return Number.isNaN(e.getTime())?void 0:e;if("string"==typeof e){let t=e.trim();if(!t.length)return;let r=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(r){let[,e,t,a]=r,s=Number(e),i=Number(t)-1,n=Number(a);if(Number.isInteger(s)&&Number.isInteger(i)&&Number.isInteger(n)){let e=new Date(s,i,n);return Number.isNaN(e.getTime())?void 0:e}}let a=new Date(t);return Number.isNaN(a.getTime())?void 0:a}if("number"==typeof e){let t=new Date(e);return Number.isNaN(t.getTime())?void 0:t}}}function a(e,t=!1){let s;if(!e)return"";let i="string"==typeof e?r(e):e;if(!i)return"";let n=t?((s=new Date(i)).setDate(s.getDate()+-1),s):i;return new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit"}).format(n)}e.s(["formatDisplayDate",()=>a,"toDateOrUndefined",()=>r,"toIsoDate",()=>t])},52607,37851,e=>{"use strict";var t=e.i(81996);function r(e){if(!e||"object"!=typeof e)return 0;if("number"==typeof e.duration&&Number.isFinite(e.duration)&&e.duration>0)return e.duration;let r=(0,t.toDateOrUndefined)(e.start),a=(0,t.toDateOrUndefined)(e.end);if(!r||!a)return 0;let s=(a.getTime()-r.getTime())/864e5;return!Number.isFinite(s)||s<=0?0:s}function a(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e&&e.trim().length){let t=Number(e);if(!Number.isNaN(t))return t}}function s(e,t,r){return Math.max(t,Math.min(r,e))}function i(e,r,s){return{tasks:e.map(e=>(function(e){let r={};void 0!==e.id&&(r.id=e.id),void 0!==e.text&&(r.text=e.text),void 0!==e.type&&(r.type=e.type);let s=(0,t.toIsoDate)(e.start);if(s&&(r.start=s),"milestone"===e.type);else{let a=(0,t.toIsoDate)(e.end);a&&(r.end=a)}let i=(0,t.toIsoDate)(e.base_start);i&&(r.base_start=i);let n=(0,t.toIsoDate)(e.base_end);n&&(r.base_end=n);let l=a(e.progress);return void 0!==l&&(r.progress=l),void 0!==e.parent&&(r.parent=e.parent),void 0!==e.lazy&&(r.lazy=e.lazy),void 0!==e.category&&(r.category=e.category),void 0!==e.workType&&(r.workType=e.workType),void 0!==e.open&&(r.open=e.open),r})(e)),links:r.map(e=>{let t;return t={},void 0!==e.id&&(t.id=e.id),void 0!==e.source&&(t.source=e.source),void 0!==e.target&&(t.target=e.target),void 0!==e.type&&(t.type=e.type),t}),scales:s?.map(e=>({unit:e.unit,step:e.step,format:e.format}))}}e.s(["calculateTaskDuration",()=>r,"clamp",()=>s,"normalizeNumber",()=>a],37851),e.s(["serializeSchedule",()=>i],52607)},49453,e=>{"use strict";var t=e.i(81996);let r={urgent:{bar:"#f49a82",progress:"#f45e36"},narrow:{bar:"#676a81",progress:"#1a2630"},progress:{bar:"#00bcd4",progress:"#00bcd4"},round:{bar:"#10b981",progress:"#6ee7b7"}};function a(e){let a={...e},s=(0,t.toDateOrUndefined)(a.start);s&&(a.start=new Date(s));let i=(0,t.toDateOrUndefined)(a.end);i&&(a.end=new Date(i));let n=(0,t.toDateOrUndefined)(a.base_start);n&&(a.base_start=new Date(n));let l=(0,t.toDateOrUndefined)(a.base_end);l&&(a.base_end=new Date(l)),"milestone"===a.type&&(a.duration=0,delete a.end);let o=r["string"==typeof a.type?a.type:""];return o&&(a.color=o.bar,a.progressColor=o.progress),a}e.s(["decorateTask",()=>a])},70823,e=>{"use strict";e.i(81996),e.i(37851),e.i(52607),e.i(49453),e.s([])},71839,e=>{"use strict";let t="contech_gantt_projects",r="contech_gantt_charts";function a(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function s(){let e=localStorage.getItem(t);return e?JSON.parse(e):[]}function i(e){return s().find(t=>t.id===e)||null}function n(e){let r=s(),i={id:a(),...e,status:e.status||"planning",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),created_by:"mock-user-id"};return r.push(i),localStorage.setItem(t,JSON.stringify(r)),i}function l(e,r){let a=s(),i=a.findIndex(t=>t.id===e);if(-1===i)throw Error("Project not found");return a[i]={...a[i],...r,updated_at:new Date().toISOString()},localStorage.setItem(t,JSON.stringify(a)),a[i]}function o(e){let r=s().filter(t=>t.id!==e);localStorage.setItem(t,JSON.stringify(r))}function d(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).filter(t=>t.project_id===e)}function c(e){let t=localStorage.getItem(r);return(t?JSON.parse(t):[]).find(t=>t.id===e)||null}function m(e){let t=localStorage.getItem(r),s=t?JSON.parse(t):[],i={id:a(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.push(i),localStorage.setItem(r,JSON.stringify(s)),i}function u(e,t){let a=localStorage.getItem(r),s=a?JSON.parse(a):[],i=s.findIndex(t=>t.id===e);if(-1===i)throw Error("Chart not found");return s[i]={...s[i],...t,updated_at:new Date().toISOString()},localStorage.setItem(r,JSON.stringify(s)),s[i]}function p(e){let t=localStorage.getItem(r),a=(t?JSON.parse(t):[]).filter(t=>t.id!==e);localStorage.setItem(r,JSON.stringify(a))}function f(e){let t=localStorage.getItem("contech_gantt_tasks");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}function x(e){let t=localStorage.getItem("contech_gantt_links");return(t?JSON.parse(t):[]).filter(t=>t.gantt_chart_id===e)}e.s(["createMockGanttChart",()=>m,"createMockProject",()=>n,"deleteMockGanttChart",()=>p,"deleteMockProject",()=>o,"getMockGanttChart",()=>c,"getMockGanttCharts",()=>d,"getMockLinks",()=>x,"getMockProject",()=>i,"getMockProjects",()=>s,"getMockTasks",()=>f,"updateMockGanttChart",()=>u,"updateMockProject",()=>l])},18566,(e,t,r)=>{t.exports=e.r(76562)},66255,e=>{"use strict";var t=e.i(47167),r=e.i(11795),a=e.i(71839);let s="true"===t.default.env.NEXT_PUBLIC_USE_MOCK;async function i(e){if(s)return(0,a.getMockGanttCharts)(e);let t=(0,r.createClient)(),{data:i,error:n}=await t.from("gantt_charts").select("*").eq("project_id",e).order("created_at",{ascending:!1});return n?(console.error("Error fetching Gantt charts:",n),(0,a.getMockGanttCharts)(e)):i}async function n(e){if(s)return(0,a.getMockGanttChart)(e);let t=(0,r.createClient)(),{data:i,error:n}=await t.from("gantt_charts").select("*").eq("id",e).single();return n?("PGRST116"===n.code||console.error("Error fetching Gantt chart:",n),(0,a.getMockGanttChart)(e)):i}async function l(e){if(s)return(0,a.createMockGanttChart)(e);let t=(0,r.createClient)(),{data:i,error:n}=await t.from("gantt_charts").insert(e).select().single();return n?(console.error("Error creating Gantt chart:",n),(0,a.createMockGanttChart)(e)):i}e.s(["createGanttChart",()=>l,"getGanttChart",()=>n,"getGanttCharts",()=>i])},71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},2643,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(22016),i=e.i(39964),n=e.i(59544),l=e.i(87316);let o=(0,e.i(75254).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var d=e.i(23585);e.i(70823);var c=e.i(81996);function m({chart:e}){return(0,t.jsxs)(i.Card,{className:"card-hover transition-all duration-200",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(i.CardTitle,{className:"text-xl mb-1",children:(0,t.jsx)(s.default,{href:`/gantt/${e.id}`,className:"hover:text-accent-600 dark:hover:text-accent-400 transition-colors",children:e.name})}),(0,t.jsx)(i.CardDescription,{className:"line-clamp-2",children:e.description||"설명이 없습니다."})]}),(0,t.jsx)(n.Button,{variant:"ghost",size:"sm",className:"w-8 h-8 p-0",children:(0,t.jsx)(d.MoreVertical,{className:"h-4 w-4"})})]})}),(0,t.jsx)(i.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-primary-600 dark:text-primary-400",children:[(0,t.jsx)(l.Calendar,{className:"h-4 w-4 mr-2"}),(0,t.jsxs)("span",{children:[(0,c.formatDisplayDate)(e.start_date),e.end_date&&` ~ ${(0,c.formatDisplayDate)(e.end_date)}`]})]}),(0,t.jsxs)("div",{className:"text-xs text-primary-500 dark:text-primary-500",children:["생성일: ",new Date(e.created_at).toLocaleDateString("ko-KR")]}),(0,t.jsx)("div",{className:"flex items-center gap-2 pt-2 border-t border-primary-200 dark:border-primary-800",children:(0,t.jsx)(s.default,{href:`/gantt/${e.id}`,className:"flex-1",children:(0,t.jsxs)(n.Button,{variant:"primary",size:"sm",className:"w-full",children:[(0,t.jsx)(o,{className:"h-4 w-4 mr-2"}),"열기"]})})})]})})]})}var u=e.i(66255),p=e.i(17923);function f({projectId:e}){let[a,s]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[l,o]=(0,r.useState)(null);return((0,r.useEffect)(()=>{!async function(){try{n(!0);let t=await (0,u.getGanttCharts)(e);s(t),o(null)}catch(e){console.error("Failed to load Gantt charts:",e),o("Gantt 차트를 불러오는 데 실패했습니다.")}finally{n(!1)}}()},[e]),i)?(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{className:"ml-3 text-primary-600",children:"차트 로딩 중..."})]}):l?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,t.jsxs)("div",{className:"text-error-600 mb-4",children:["⚠️ ",l]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"btn btn-primary",children:"다시 시도"})]}):0===a.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center border-2 border-dashed border-primary-300 dark:border-primary-700 rounded-lg",children:[(0,t.jsx)(p.BarChart3,{className:"h-16 w-16 text-primary-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-primary-900 dark:text-primary-100 mb-2",children:"Gantt 차트가 없습니다"}),(0,t.jsx)("p",{className:"text-primary-600 dark:text-primary-400 mb-4",children:"새 Gantt 차트를 생성하여 프로젝트를 관리하세요"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,t.jsx)(m,{chart:e},e.id))})}var x=e.i(53145),h=e.i(94814),g=e.i(81307),y=e.i(3812),b=e.i(37727),N=e.i(46696);let j=g.z.object({name:g.z.string().min(1,"Gantt 차트 이름을 입력하세요").max(100,"이름이 너무 깁니다"),description:g.z.string().max(500,"설명이 너무 깁니다").optional(),start_date:g.z.string().min(1,"시작일을 선택하세요"),end_date:g.z.string().optional()});function v({projectId:e,isOpen:a,onClose:s,onSuccess:i}){let[l,o]=(0,r.useState)(!1),{register:d,handleSubmit:c,formState:{errors:m},reset:p}=(0,x.useForm)({resolver:(0,h.zodResolver)(j),defaultValues:{name:"",description:"",start_date:new Date().toISOString().split("T")[0],end_date:""}}),f=async t=>{try{o(!0);let r={project_id:e,name:t.name,description:t.description||void 0,start_date:t.start_date,end_date:t.end_date||void 0};await (0,u.createGanttChart)(r),N.toast.success("Gantt 차트가 생성되었습니다"),p(),i(),s()}catch(e){console.error("Failed to create Gantt chart:",e),N.toast.error("Gantt 차트 생성 실패")}finally{o(!1)}};return a?(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,t.jsxs)("div",{className:"relative bg-white dark:bg-primary-900 rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-primary-200 dark:border-primary-800",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-primary-900 dark:text-primary-100",children:"새 Gantt 차트"}),(0,t.jsx)("button",{onClick:s,className:"text-primary-500 hover:text-primary-700 dark:hover:text-primary-300",children:(0,t.jsx)(b.X,{className:"h-6 w-6"})})]}),(0,t.jsxs)("form",{onSubmit:c(f),className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"Gantt 차트 이름 *"}),(0,t.jsx)(y.Input,{...d("name"),placeholder:"예: 건설 공정 일정표"}),m.name&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:m.name.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"설명"}),(0,t.jsx)("textarea",{...d("description"),rows:3,className:"flex w-full rounded-md border border-primary-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-primary-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-primary-800 dark:bg-primary-950 dark:ring-offset-primary-950 dark:placeholder:text-primary-400 dark:focus-visible:ring-primary-300",placeholder:"Gantt 차트 설명을 입력하세요"}),m.description&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:m.description.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"시작일 *"}),(0,t.jsx)(y.Input,{type:"date",...d("start_date")}),m.start_date&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:m.start_date.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-primary-700 dark:text-primary-300 mb-2",children:"종료일"}),(0,t.jsx)(y.Input,{type:"date",...d("end_date")}),m.end_date&&(0,t.jsx)("p",{className:"mt-1 text-sm text-error-600",children:m.end_date.message})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:s,className:"flex-1",disabled:l,children:"취소"}),(0,t.jsx)(n.Button,{type:"submit",variant:"primary",className:"flex-1",loading:l,disabled:l,children:"생성"})]})]})]})]}):null}var k=e.i(71689),w=e.i(7233),S=e.i(46700);function _({params:e}){let{id:i}=(0,r.use)(e),l=(0,a.useRouter)(),[o,d]=(0,r.useState)(null),[c,m]=(0,r.useState)(!0),[u,p]=(0,r.useState)(!1),[x,h]=(0,r.useState)(0);return((0,r.useEffect)(()=>{!async function(){try{let e=await (0,S.getProject)(i);if(!e){N.toast.error("프로젝트를 찾을 수 없습니다"),l.push("/dashboard");return}d(e)}catch(e){console.error("Failed to load project:",e),N.toast.error("프로젝트 로딩 실패")}finally{m(!1)}}()},[i,l]),c)?(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{className:"ml-3 text-primary-600",children:"프로젝트 로딩 중..."})]}):o?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)(s.default,{href:"/dashboard",children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",children:[(0,t.jsx)(k.ArrowLeft,{className:"h-4 w-4 mr-2"}),"대시보드로 돌아가기"]})})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-primary-900 dark:text-primary-100",children:o.name}),(0,t.jsx)("p",{className:"mt-2 text-primary-600 dark:text-primary-400",children:o.description||"설명이 없습니다."})]}),(0,t.jsxs)(n.Button,{variant:"primary",size:"lg",onClick:()=>p(!0),children:[(0,t.jsx)(w.Plus,{className:"h-5 w-5 mr-2"}),"새 Gantt 차트"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-4 text-primary-900 dark:text-primary-100",children:"Gantt 차트 목록"}),(0,t.jsx)(r.Suspense,{fallback:(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"spinner"}),(0,t.jsx)("span",{className:"ml-3 text-primary-600",children:"차트 로딩 중..."})]}),children:(0,t.jsx)(f,{projectId:i},x)})]}),(0,t.jsx)(v,{projectId:i,isOpen:u,onClose:()=>p(!1),onSuccess:()=>{h(e=>e+1)}})]}):null}e.s(["default",()=>_],2643)}]);